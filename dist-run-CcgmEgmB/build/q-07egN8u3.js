const D=function(){const n=typeof document<"u"&&document.createElement("link").relList;return n&&n.supports&&n.supports("modulepreload")?"modulepreload":"preload"}(),R=function(t){return"/"+t},L={},F=function(n,e,o){let s=Promise.resolve();if(e&&e.length>0){let i=function(c){return Promise.all(c.map(a=>Promise.resolve(a).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),g=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=i(e.map(c=>{if(c=R(c),c in L)return;L[c]=!0;const a=c.endsWith(".css"),m=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":D,a||(d.as="script"),d.crossOrigin="",d.href=c,g&&d.setAttribute("nonce",g),document.head.appendChild(d),a)return new Promise((x,C)=>{d.addEventListener("load",x),d.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i}return s.then(i=>{for(const r of i||[])r.status==="rejected"&&l(r.reason);return n().catch(l)})},$=document,_="modulepreload",j="preload",u={t:0,o:25,l:.65},A=$.createElement("link").relList.supports(_)?_:j,U=Date.now(),M=/\.[mc]?js$/,y=0,O=1,B=2,Q=3,G=4,S=new Map;let b,w=0;const f=[],p=(...t)=>{console.log(`Preloader ${Date.now()-U}ms ${w}/${f.length} queued>`,...t)},z=()=>{b&&(f.sort((t,n)=>t.u-n.u),b=0)},E=()=>{if(f.length){for(z();f.length;){const t=f[0],e=1-t.u,o=h?Math.max(1,u.o*e):2;if(e>=.99||w<o)f.shift(),J(t);else break}if(u.t&&!f.length){const t=[...S.values()].filter(o=>o.i>y),n=t.reduce((o,s)=>o+s.p,0),e=t.reduce((o,s)=>o+s.$,0);p(`>>>> done ${t.length}/${S.size} total: ${n}ms waited, ${e}ms loaded`)}}},J=t=>{if(t.i>=B)return;w++;const n=Date.now();t.p=n-t.m,t.i=B,u.t&&p(`<< load ${Math.round((1-t.u)*100)}% after ${`${t.p}ms`}`,t.B);const e=$.createElement("link");e.href=new URL(`${q}${t.B}`,$.baseURI).toString(),e.rel=A,e.as="script",e.onload=e.onerror=()=>{w--;const o=Date.now();t.$=o-n,t.i=G,u.t&&p(`>> done after ${t.$}ms`,t.B),e.remove(),E()},$.head.appendChild(e)},P=(t,n,e)=>{if(e!=null&&e.has(t))return;const o=t.u;if(t.u=n,!(o-t.u<.01)&&(q!=null&&t.i<B&&t.u<u.l&&(t.i===y&&(t.i=O,f.push(t),u.t&&p(`queued ${Math.round((1-t.u)*100)}%`,t.B)),b=1),t.h)){e||(e=new Set),e.add(t);const s=1-t.u;for(const l of t.h){const i=k(l.B);if(i.u===0)continue;let r;if(l.S>.5&&(s===1||s>=.99&&v<100))v++,r=Math.min(.01,1-l.S);else{const g=1-l.S*s,c=l.q,a=g/c;r=Math.max(.02,i.u*a),l.q=a}P(i,r,e)}}},I=(t,n)=>{const e=k(t);e&&e.u>n&&P(e,n)};let v;const N=(t,n)=>{if(!(t!=null&&t.length))return;v=0;let e=n?1-n:.4;if(Array.isArray(t))for(let o=t.length-1;o>=0;o--){const s=t[o];typeof s=="number"?e=1-s/10:I(s,e)}else I(t,e);E()};document.addEventListener("qsymbol",t=>{const{symbol:n,href:e}=t.detail;if(e){const o=n.slice(n.lastIndexOf("_")+1);N(o,1)}});let q,h;const T=(t,n)=>({B:t,i:M.test(t)?y:Q,h:n,u:1,m:Date.now(),p:0,$:0}),W=t=>{const n=new Map;let e=0;for(;e<t.length;){const o=t[e++],s=[];let l,i=1;for(;l=t[e],typeof l=="number";)l<0?i=-l/10:s.push({B:t[l],S:i,q:1}),e++;n.set(o,s)}return n},k=t=>{let n=S.get(t);if(!n){let e;if(h){if(e=h.get(t),!e)return;e.length||(e=void 0)}n=T(t,e),S.set(t,n)}return n},H=(t,n,e)=>{e&&("d"in e&&(u.t=!!e.d),"P"in e&&(u.o=e.P),"Q"in e&&(u.l=1-e.Q)),t!=null&&(q=t,n&&n.then(o=>o.text()).then(o=>{h=W(JSON.parse(o));const s=[];for(const[l,i]of h.entries()){const r=k(l);r.h=i,r.u<1&&(s.push([r,r.u]),r.u=1)}u.t&&p(`parseBundleGraph got ${h.size} bundles, adjusting ${s.length}`);for(const[l,i]of s)P(l,i);E()}).catch(console.warn))};export{F as _,W as g,I as h,H as l,N as p};
